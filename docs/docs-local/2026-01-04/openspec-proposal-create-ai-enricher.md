# OpenSpec Proposal Report: Create AI Content Enricher Skill (Refactor)

**Date**: 2026-01-04  
**Time**: 00:33 (Local)  
**Session**: Refactoring Proposal  
**Change ID**: `create-ai-content-enricher-skill`

---

## Strategic Shift

The user accepted the recommendation to **split the skills**. Instead of building a monolithic crawler, we are creating a dedicated AI enrichment skill.

- **Old Path**: `sitemap_to_markdown` handles everything (crawling + LLM).
- **New Path**:
  1. `sitemap_to_markdown`: Focuses on high-performance crawling.
  2. `ai_content_enricher`: Focuses on analysis (Summary, Entities, Chunking) of _any_ content.
  3. **Integration**: Crawler invokes Enricher as a post-processing step.

---

## Changes Made

1.  **Deleted**: `openspec/changes/implement-pydantic-ai-features` (Old Proposal).
2.  **Created**: `openspec/changes/create-ai-content-enricher-skill` (New Proposal).

### Proposal Components

| File                                  | Purpose                                                                                       |
| ------------------------------------- | --------------------------------------------------------------------------------------------- |
| `proposal.md`                         | Defines the new skill creation and the integration pattern with the crawler.                  |
| `design.md`                           | Details the Pydantic AI implementation (Agents, Models) and the subprocess call architecture. |
| `tasks.md`                            | 5-phase plan covering Skill Skeleton, AI Core, File Ops, Crawler Integration, and Testing.    |
| `specs/ai-content-enrichment/spec.md` | New capability spec for the standalone AI analysis features.                                  |
| `specs/sitemap-to-markdown/spec.md`   | Delta spec adding the orchestration requirement to the crawler.                               |

### Key Design Decisions

- **Pydantic AI**: Still the core framework for the AI skill.
- **Subprocess Integration**: Crawler calls the new skill via CLI (`subprocess.run`), avoiding dependency coupling (import nightmares).
- **Universal Input**: The new skill accepts _any_ directory of Markdown files, making it reusable beyond just sitemaps.

---

## Validation

```bash
$ openspec validate create-ai-content-enricher-skill --strict
Change 'create-ai-content-enricher-skill' is valid
```

---

## Next Steps

1.  **Approval**: User approves this new modular architecture.
2.  **Implementation**:
    - Create `skills-repository/ai_content_enricher/`.
    - Code the Pydantic AI logic there.
    - Update `sitemap_to_markdown.py` to add the subprocess trigger.
    - Update the `extend-sitemap-advanced-features` tracking to reflect this delegation.

---

_Report generated by Antigravity on 2026-01-04_
